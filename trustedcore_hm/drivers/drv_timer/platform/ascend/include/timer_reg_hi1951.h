/*
 * Copyright (c) Huawei Technologies Co., Ltd. 2019-2020. All rights reserved.
 * Description: Header file about timer
 * Create: 2019-08-20
 */

#ifndef DRV_TIMER_PLATFORM_TIMER_HI1951_H
#define DRV_TIMER_PLATFORM_TIMER_HI1951_H

#include <stdint.h>
#include <timer_types.h>

/*
 * clockcycles * NSECS_PER_MSEC < 2^64
 * so, clockcycles max:
 * 2^64/1000000 (~17 years)
 */
#ifdef FREE_TIMER_COUNT_MAX
#undef FREE_TIMER_COUNT_MAX
#endif
#define FREE_TIMER_COUNT_MAX 110680464442200000

#ifdef TIMER_COUNT_MAX
#undef TIMER_COUNT_MAX
#endif
#define TIMER_COUNT_MAX TIMER_COUNT_MAX_64BIT

#define TIMER_CLK_FREQ 200000000
#define TIMER_SYSCNT_FREQ_RATE  ((double)6103.52) /* 200M / 32K */

#define OS_TIMER0_REG       0x8B300000
#define OS_TIMER1_REG       0x8B310000
#define SUBCTRL_REG         0x880C0000

#define LOWPOWER_TIMER      0x84820000

#define FREE_RUNNING_TIMER_BASE     OS_TIMER0_REG
#define TICK_TIMER_BASE             OS_TIMER1_REG


#define FREE_RUNNING_TIMER_NUM 1
#define TICK_TIMER_NUM         0


/* SPI number to call normal world tc_notify_func */
#define SPI_NUM_FOR_NOTIFY 310

/* dc/mdc 1951 secure timer */
#define FREE_RUNNING_FIQ_NUMBLER     138
#define TICK_TIMER_FIQ_NUMBLER       139

#define SC_SEC_TIMER_CLK_SEL    (SUBCTRL_REG + 0x204)
#define SC_OS_TIMER0_RESET_DREQ (SUBCTRL_REG + 0xC0C)
#define SC_OS_TIMER1_RESET_DREQ (SUBCTRL_REG + 0xC44)
#define TIMER64_LOAD_L_REG0     (OS_TIMER0_REG + 0x0000)
#define TIMER64_LOAD_L_REG1     (OS_TIMER1_REG + 0x0000)
#define TIMER64_LOAD_H_REG0     (OS_TIMER0_REG + 0x0004)
#define TIMER64_LOAD_H_REG1     (OS_TIMER1_REG + 0x0004)
#define TIMER64_CONTROL_REG0    (OS_TIMER0_REG + 0x0010)
#define TIMER64_CONTROL_REG1    (OS_TIMER1_REG + 0x0010)
#define TIMER64_VALUE_L_REG0    (OS_TIMER0_REG + 0x0020)
#define TIMER64_VALUE_L_REG1    (OS_TIMER1_REG + 0x0020)
#define TIMER64_VALUE_H_REG0    (OS_TIMER0_REG + 0x0024)
#define TIMER64_VALUE_H_REG1    (OS_TIMER1_REG + 0x0024)
#define TIMER64_INTCLR_REG0     (OS_TIMER0_REG + 0x0014)
#define TIMER64_INTCLR_REG1     (OS_TIMER1_REG + 0x0014)
#define TIMER64_MIS_REG0        (OS_TIMER0_REG + 0x001C)
#define TIMER64_MIS_REG1        (OS_TIMER1_REG + 0x001C)
#define TIMER64_BGLOAD_L_REG0   (OS_TIMER0_REG + 0x0008)
#define TIMER64_BGLOAD_L_REG1   (OS_TIMER1_REG + 0x0008)
#define TIMER64_BGLOAD_H_REG0   (OS_TIMER0_REG + 0x000C)
#define TIMER64_BGLOAD_H_REG1   (OS_TIMER1_REG + 0x000C)

#define LOWPOWER_TIMER_VAL      (LOWPOWER_TIMER + 0x30)
#endif /* DRV_TIMER_PLATFORM_TIMER_HI1951_H */
