# Copyright (c) Huawei Technologies Co., Ltd. 2020-2020. All rights reserved.
# Description: DRM dec driver
# Author: zhanghanmeng
# Create: 2020-6-10 9:13:54

VFMW_6_2_DIR := $(TOPDIR)/../../../../../vendor/hisi/ap/kernel/drivers/vcodec/hi_vcodec/vdec_hivna/vfmw/vfmw_v6.2
VFMW_4_0_DIR := $(TOPDIR)/../../../../../vendor/hisi/ap/hardware/vcodec/zcodec/codec/vdec/core/vfmw_v4.0

ifneq ($(findstring kirin710, $(TARGET_BOARD_PLATFORM)), )
PRODUCT_DIR  := HiVCodecV200
endif

ifneq ($(findstring orlando, $(TARGET_BOARD_PLATFORM)), )
PRODUCT_DIR  := HiVCodecV200
endif

ifneq ($(findstring kirin970, $(TARGET_BOARD_PLATFORM)), )
PRODUCT_DIR  := HiVCodecV200
endif

ifneq ($(findstring kirin980, $(TARGET_BOARD_PLATFORM)), )
PRODUCT_DIR  := HiVCodecV200
endif

ifneq ($(findstring kirin990, $(TARGET_BOARD_PLATFORM)), )
PRODUCT_DIR  := HiVCodecV500
endif

ifneq ($(findstring denver, $(TARGET_BOARD_PLATFORM)), )
PRODUCT_DIR  := HiVCodecV500
endif

ifneq ($(findstring laguna, $(TARGET_BOARD_PLATFORM)), )
PRODUCT_DIR  := HiVCodecV200
endif

ifneq ($(findstring baltimore, $(TARGET_BOARD_PLATFORM)), )
PRODUCT_DIR  := HiVCodecV600
endif

ifeq ($(strip $(TRUSTEDCORE_CHIP_CHOOSE)), WITH_CHIP_BALTIMORE)
include $(VFMW_6_2_DIR)/product/$(PRODUCT_DIR)/sec_cfg/vfmw_make.cfg
inc-flags += -DVDH_BASE_PHY_ADDR=0xe9200000
else
include $(VFMW_4_0_DIR)/firmware/product/$(PRODUCT_DIR)/SEC_CFG/vfmw_make.cfg
inc-flags += -I$(SOURCE_DIR)/platform/kirin/vcodec/hi_vcodec
inc-flags += -I$(SOURCE_DIR)/../../prebuild/hm-teeos-release/headers/hm/kernel
inc-flags += -I$(SOURCE_DIR)/../../prebuild/hm-teeos-release/headers/kernel/uapi
inc-flags += -I$(SOURCE_DIR)/platform/kirin/secmem/include
inc-flags += -I$(SOURCE_DIR)/platform/kirin/secmem/driver/iommu
endif

inc-flags += -DTEE_SUPPORT_HIVCODEC

#ifeq ($(HM_OPEN), true)
inc-flags += -DENABLE_DRM_HM
#endif

ifeq ($(TARGET_BUILD_VARIANT),eng)
inc-flags += -DVCODEC_ENG_VERSION
else
inc-flags += $(filter-out -DVCODEC_ENG_VERSION,$(flags))
endif

ifeq ($(CFG_CONFIG_HISI_FAMA),true)
inc-flags += -DCONFIG_HISI_FAMA
endif

ifeq ($(strip $(TRUSTEDCORE_CHIP_CHOOSE)), WITH_CHIP_HI3670)
inc-flags += -I$(TOP)/vendor/hisi/ap/platform/kirin970
endif
ifeq ($(strip $(TRUSTEDCORE_CHIP_CHOOSE)), WITH_CHIP_HI3680)
inc-flags += -I$(TOP)/vendor/hisi/ap/platform/kirin980
endif
ifeq ($(strip $(TRUSTEDCORE_CHIP_CHOOSE)), WITH_CHIP_KIRIN990)
inc-flags += -I$(TOP)/vendor/hisi/ap/platform/kirin990
endif
ifeq ($(strip $(TRUSTEDCORE_CHIP_CHOOSE)), WITH_CHIP_DENVER)
inc-flags += -I$(TOP)/vendor/hisi/ap/platform/denver
endif
ifeq ($(strip $(TRUSTEDCORE_CHIP_CHOOSE)), WITH_CHIP_LAGUNA)
inc-flags += -I$(TOP)/vendor/hisi/ap/platform/laguna
endif
ifeq ($(strip $(TRUSTEDCORE_CHIP_CHOOSE)), WITH_CHIP_ORLANDO)
inc-flags += -I$(TOP)/vendor/hisi/ap/platform/orlando
endif
ifeq ($(strip $(TRUSTEDCORE_CHIP_CHOOSE)), WITH_CHIP_HI6260)
inc-flags += -I$(TOP)/vendor/hisi/ap/platform/kirin710
endif
ifeq ($(strip $(TRUSTEDCORE_CHIP_CHOOSE)), WITH_CHIP_BALTIMORE)
inc-flags += -I$(TOP)/vendor/hisi/ap/platform/baltimore
endif
